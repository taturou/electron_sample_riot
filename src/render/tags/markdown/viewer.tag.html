<markdown-viewer>
  <div class="contents" ref="contents"></div>

  <script>
    import {subscribe, unsubscribe} from 'businessman';
    import markdownIt from 'markdown-it';
    import markdownItGithubToc from 'markdown-it-github-toc';

    let tag = this;
    tag.md = new markdownIt({
      html: true,
      linkify: true,
      typography: true,
    })
    .use(markdownItGithubToc, {
      anchorLink: false
    });

    tag.on('mount', () => {
      subscribe('markdown', (state, mutationType) => {
        tag.refs.contents.innerHTML = tag.md.render(state);
        tag.update();
      });
    });

    tag.on('unmount', () => {
      unsubscribe('markdown');
    });
  </script>

  <style type="scss">
    .contents {
      height: 90vh;
      min-height: 90vh;
      max-height: 90vh;
    }
  </style>
</markdown-viewer>